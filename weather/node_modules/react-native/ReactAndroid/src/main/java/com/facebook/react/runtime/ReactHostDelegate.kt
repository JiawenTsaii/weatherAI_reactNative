/*
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

package com.facebook.react.runtime

import com.facebook.infer.annotation.ThreadSafe
import com.facebook.react.ReactPackage
import com.facebook.react.ReactPackageTurboModuleManagerDelegate
import com.facebook.react.bridge.JSBundleLoader
import com.facebook.react.common.annotations.UnstableReactNativeAPI
import com.facebook.react.fabric.ReactNativeConfig
<<<<<<< HEAD
=======
import com.facebook.react.turbomodule.core.TurboModuleManager
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615

/**
 * [ReactHostDelegate] is an interface that defines parameters required to initialize React Native.
 * This interface works in combination with [ReactHost]
 */
@ThreadSafe
@UnstableReactNativeAPI
<<<<<<< HEAD
public interface ReactHostDelegate {
=======
interface ReactHostDelegate {
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615
  /**
   * Path to your app's main module on Metro. This is used when reloading JS during development. All
   * paths are relative to the root folder the packager is serving files from. Examples:
   * `index.android` or `subdirectory/index.android`
   */
<<<<<<< HEAD
  public val jsMainModulePath: String
=======
  val jsMainModulePath: String
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615

  /**
   * Object that holds a native C++ references that allow host applications to install C++ objects
   * into jsi::Runtime during the initialization of React Native
   */
<<<<<<< HEAD
  public val bindingsInstaller: BindingsInstaller?

  /** list of [ReactPackage] to expose Native Modules and View Components to JS */
  public val reactPackages: List<ReactPackage>

  /** Object that holds a native reference to the javascript engine */
  public val jsRuntimeFactory: JSRuntimeFactory
=======
  val bindingsInstaller: BindingsInstaller?

  /** list of [ReactPackage] to expose Native Modules and View Components to JS */
  val reactPackages: List<ReactPackage>

  /** Object that holds a native reference to the javascript engine */
  val jsEngineInstance: JSEngineInstance
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615

  /**
   * Bundle loader to use when setting up JS environment. <p>Example:
   * [JSBundleLoader.createFileLoader(application, bundleFile)]
   */
<<<<<<< HEAD
  public val jsBundleLoader: JSBundleLoader

  /** TODO: combine getTurboModuleManagerDelegate inside [ReactPackage] */
  public val turboModuleManagerDelegateBuilder: ReactPackageTurboModuleManagerDelegate.Builder
=======
  val jsBundleLoader: JSBundleLoader

  /** TODO: combine getTurboModuleManagerDelegate inside [ReactPackage] */
  val turboModuleManagerDelegateBuilder: ReactPackageTurboModuleManagerDelegate.Builder
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615

  /**
   * Callback that can be used by React Native host applications to react to exceptions thrown by
   * the internals of React Native.
   */
<<<<<<< HEAD
  public fun handleInstanceException(error: Exception)
=======
  fun handleInstanceException(error: Exception)
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615

  /**
   * ReactNative Configuration that allows to customize the behavior of key/value pairs used by the
   * framework to enable/disable experimental capabilities
<<<<<<< HEAD
   *
   * [moduleProvider] is a function that returns the Native Module with the name received as a
   * parameter.
   */
  public fun getReactNativeConfig(): ReactNativeConfig

  @UnstableReactNativeAPI
  public class ReactHostDelegateBase(
      override val jsMainModulePath: String,
      override val jsBundleLoader: JSBundleLoader,
      override val jsRuntimeFactory: JSRuntimeFactory,
=======
   */
  fun getReactNativeConfig(turboModuleManager: TurboModuleManager): ReactNativeConfig

  @UnstableReactNativeAPI
  class ReactHostDelegateBase(
      override val jsMainModulePath: String,
      override val jsBundleLoader: JSBundleLoader,
      override val jsEngineInstance: JSEngineInstance,
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615
      override val turboModuleManagerDelegateBuilder:
          ReactPackageTurboModuleManagerDelegate.Builder,
      override val reactPackages: List<ReactPackage> = emptyList(),
      override val bindingsInstaller: BindingsInstaller? = null,
      private val reactNativeConfig: ReactNativeConfig = ReactNativeConfig.DEFAULT_CONFIG,
      private val exceptionHandler: (error: Exception) -> Unit = {}
  ) : ReactHostDelegate {

<<<<<<< HEAD
    override fun getReactNativeConfig(): ReactNativeConfig = reactNativeConfig

    override fun handleInstanceException(error: Exception): Unit = exceptionHandler(error)
=======
    override fun getReactNativeConfig(turboModuleManager: TurboModuleManager) = reactNativeConfig

    override fun handleInstanceException(error: Exception) = exceptionHandler(error)
>>>>>>> d8fbf97a591e21830818fb4b5745c614f0d90615
  }
}
